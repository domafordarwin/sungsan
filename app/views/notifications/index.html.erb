<div class="max-w-3xl mx-auto">
  <div class="card-basalt animate-in" style="padding: 2rem;">
    <div class="page-header" style="margin-bottom: 1.5rem; border-bottom: none; padding-bottom: 0;">
      <h1>알림 이력</h1>
      <% if policy(Notification).create? %>
        <%= link_to "공지 작성", new_notification_path, class: "btn-ocean" %>
      <% end %>
    </div>

    <% if @notifications.any? %>
      <table class="table-stone">
        <thead>
          <tr>
            <th>유형</th>
            <th>제목</th>
            <th>수신자</th>
            <th>상태</th>
            <th>발송일</th>
          </tr>
        </thead>
        <tbody>
          <% @notifications.each do |n| %>
            <tr>
              <td>
                <span class="badge
                  <%= case n.notification_type
                      when 'assignment' then 'badge-ocean'
                      when 'announcement' then 'badge-sunrise'
                      else 'badge-basalt'
                      end %>">
                  <%= case n.notification_type
                      when 'assignment' then '배정'
                      when 'reminder' then '리마인더'
                      when 'announcement' then '공지'
                      end %>
                </span>
              </td>
              <td><%= link_to n.subject, notification_path(n), class: "link-ocean" %></td>
              <td style="color: var(--basalt-500);"><%= n.recipient&.name || "전체" %></td>
              <td>
                <span class="badge
                  <%= case n.status
                      when 'sent' then 'badge-moss'
                      when 'failed' then 'badge-lava'
                      when 'read' then 'badge-ocean'
                      else 'badge-basalt'
                      end %>">
                  <%= case n.status
                      when 'pending' then '대기'
                      when 'sent' then '발송'
                      when 'failed' then '실패'
                      when 'read' then '읽음'
                      end %>
                </span>
              </td>
              <td style="color: var(--basalt-500); font-size: 0.8rem;"><%= n.created_at.strftime("%m/%d %H:%M") %></td>
            </tr>
          <% end %>
        </tbody>
      </table>
    <% else %>
      <div style="text-align: center; padding: 3rem; color: var(--basalt-400);">
        알림이 없습니다.
      </div>
    <% end %>
  </div>
</div>
