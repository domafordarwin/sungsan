<div class="max-w-4xl mx-auto">
  <div class="flex justify-between items-center mb-6">
    <h1 class="text-2xl font-bold">통계</h1>
    <div class="flex gap-2">
      <%= link_to "주간", statistics_path(period: "week"),
          class: "px-3 py-1 rounded text-sm #{@period == 'week' ? 'bg-blue-600 text-white' : 'bg-gray-200 text-gray-700'}" %>
      <%= link_to "월간", statistics_path(period: "month"),
          class: "px-3 py-1 rounded text-sm #{@period == 'month' ? 'bg-blue-600 text-white' : 'bg-gray-200 text-gray-700'}" %>
      <%= link_to "분기", statistics_path(period: "quarter"),
          class: "px-3 py-1 rounded text-sm #{@period == 'quarter' ? 'bg-blue-600 text-white' : 'bg-gray-200 text-gray-700'}" %>
    </div>
  </div>

  <!-- 핵심 지표 -->
  <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-8">
    <div class="bg-white rounded-lg shadow p-6 text-center">
      <div class="text-3xl font-bold text-blue-600"><%= @total_assignments %></div>
      <div class="text-sm text-gray-500 mt-1">총 배정</div>
    </div>
    <div class="bg-white rounded-lg shadow p-6 text-center">
      <div class="text-3xl font-bold text-green-600"><%= @participation_rate %>%</div>
      <div class="text-sm text-gray-500 mt-1">참여율</div>
    </div>
    <div class="bg-white rounded-lg shadow p-6 text-center">
      <div class="text-3xl font-bold text-red-600"><%= @absence_rate %>%</div>
      <div class="text-sm text-gray-500 mt-1">결석률</div>
    </div>
    <div class="bg-white rounded-lg shadow p-6 text-center">
      <div class="text-3xl font-bold text-purple-600"><%= @accepted_count %></div>
      <div class="text-sm text-gray-500 mt-1">수락 건수</div>
    </div>
  </div>

  <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
    <!-- 월별 봉사 횟수 -->
    <div class="bg-white rounded-lg shadow p-6">
      <h3 class="font-bold text-gray-700 mb-4">월별 봉사 횟수 (최근 6개월)</h3>
      <table class="w-full text-sm">
        <thead>
          <tr class="border-b"><th class="text-left py-2">월</th><th class="text-right py-2">수락 건수</th></tr>
        </thead>
        <tbody>
          <% @monthly_stats.each do |ms| %>
            <tr class="border-b">
              <td class="py-2"><%= ms[:month] %></td>
              <td class="py-2 text-right font-medium"><%= ms[:count] %></td>
            </tr>
          <% end %>
        </tbody>
      </table>
    </div>

    <!-- 역할별 통계 -->
    <div class="bg-white rounded-lg shadow p-6">
      <h3 class="font-bold text-gray-700 mb-4">역할별 배정 현황</h3>
      <table class="w-full text-sm">
        <thead>
          <tr class="border-b">
            <th class="text-left py-2">역할</th>
            <th class="text-right py-2">배정</th>
            <th class="text-right py-2">수락</th>
          </tr>
        </thead>
        <tbody>
          <% @role_stats.each do |rs| %>
            <tr class="border-b">
              <td class="py-2"><%= rs[:role].name %></td>
              <td class="py-2 text-right"><%= rs[:assigned] %></td>
              <td class="py-2 text-right font-medium text-green-600"><%= rs[:accepted] %></td>
            </tr>
          <% end %>
        </tbody>
      </table>
    </div>
  </div>

  <div class="mt-4">
    <%= link_to "대시보드", root_path, class: "text-gray-600 hover:text-gray-900" %>
  </div>
</div>
