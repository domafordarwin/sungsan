<div class="survey-question-card" style="margin-bottom: 1rem;">
  <div style="display: grid; gap: 0.75rem;">
    <div style="display: flex; justify-content: space-between; align-items: center;">
      <span class="label-basalt" style="margin: 0;">Q<%= f.index + 1 %></span>
      <% if f.object.persisted? %>
        <%= f.hidden_field :_destroy, value: "0", id: nil %>
        <button type="button" class="btn-ghost" style="font-size: 0.75rem; padding: 0.2rem 0.5rem; color: var(--lava-500);"
                onclick="this.closest('.survey-question-card').querySelector('input[name*=_destroy]').value='1'; this.closest('.survey-question-card').style.display='none';">삭제</button>
      <% else %>
        <button type="button" class="btn-ghost" style="font-size: 0.75rem; padding: 0.2rem 0.5rem; color: var(--lava-500);" onclick="this.closest('.survey-question-card').remove()">삭제</button>
      <% end %>
    </div>
    <div>
      <%= f.hidden_field :id if f.object.persisted? %>
      <%= f.text_field :question_text, class: "input-basalt", placeholder: "질문을 입력하세요" %>
    </div>
    <div style="display: grid; grid-template-columns: 1fr 1fr auto; gap: 0.75rem; align-items: end;">
      <div>
        <label class="label-basalt">유형</label>
        <%= f.select :question_type, [["텍스트", "text"], ["단일 선택", "radio"], ["복수 선택", "checkbox"], ["드롭다운", "select"], ["숫자", "number"]], {}, class: "input-basalt" %>
      </div>
      <div>
        <label class="label-basalt">순서</label>
        <%= f.number_field :position, class: "input-basalt", min: 0 %>
      </div>
      <div style="display: flex; align-items: center; gap: 0.5rem; padding-bottom: 0.25rem;">
        <%= f.check_box :required %>
        <label style="font-size: 0.8rem; color: var(--basalt-600);">필수</label>
      </div>
    </div>
    <div>
      <label class="label-basalt">선택지 (쉼표 구분)</label>
      <input type="text" class="input-basalt"
             value="<%= f.object.options_list.join(', ') %>"
             data-field-name="<%= f.field_name(:options) %>[]"
             onchange="updateOptions(this)">
      <% f.object.options_list.each do |opt| %>
        <input type="hidden" name="<%= f.field_name(:options) %>[]" value="<%= opt %>">
      <% end %>
    </div>
  </div>
</div>
